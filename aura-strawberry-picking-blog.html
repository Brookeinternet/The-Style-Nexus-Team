<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Escape: Aura's Strawberry Picking Day in DÔEN (Premium)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for a more elegant look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f8f8; /* Light grey background */
            color: #333; /* Darker text for readability */
        }
        /* Styles for premium content access */
        .premium-content {
            display: none; /* Hidden by default until authenticated and subscribed */
        }
        .message-box {
            background-color: #fff3cd;
            color: #664d03;
            border: 1px solid #ffecb5;
            padding: 1.5rem;
            border-radius: 0.5rem;
            text-align: center;
            margin-top: 2rem;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        .button-primary {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s;
            cursor: pointer;
            display: inline-block; /* For spacing with other buttons */
            margin-top: 1rem;
        }
        .button-primary:hover {
            background-color: #2563eb; /* blue-600 */
        }
        .button-secondary {
            background-color: #e5e7eb; /* gray-200 */
            color: #4b5563; /* gray-700 */
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s;
            cursor: pointer;
            display: inline-block; /* For spacing with other buttons */
            margin-top: 1rem;
            margin-left: 0.5rem; /* Spacing between buttons */
        }
        .button-secondary:hover {
            background-color: #d1d5db; /* gray-300 */
        }
        .loading-indicator {
            text-align: center;
            padding: 2rem;
            font-size: 1.1rem;
            color: #6b7280;
        }
        .released-soon-message {
            background-color: #dbeafe; /* Light blue */
            color: #1e40af; /* Dark blue */
            border: 1px solid #93c5fd; /* Mid blue */
        }
    </style>
</head>
<body class="antialiased">
    <div class="min-h-screen flex items-center justify-center p-4 sm:p-6 lg:p-8">
        <div class="bg-white shadow-xl rounded-xl overflow-hidden max-w-4xl w-full">
            <!-- Blog Post Header -->
            <header class="p-6 sm:p-8 border-b border-gray-200">
                <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-2">
                    Sweet Escape: Aura's Strawberry Picking Day in DÔEN
                </h1>
                <p class="text-sm sm:text-base text-center text-gray-500">
                    By The Style Nexus Team | July 16, 2025
                </p>
                <div id="auth-status" class="text-center mt-4 text-gray-600">
                    <span id="user-id-display"></span>
                    <button id="auth-button" class="ml-4 bg-blue-500 hover:bg-blue-600 text-white text-sm py-1 px-3 rounded-md">Login</button>
                    <button id="subscribe-button" class="ml-2 bg-purple-600 hover:bg-purple-700 text-white text-sm py-1 px-3 rounded-md hidden">Subscribe to Premium</button>
                    <button id="manage-subscription-button" class="ml-2 bg-gray-600 hover:bg-gray-700 text-white text-sm py-1 px-3 rounded-md hidden">Manage Subscription</button>
                </div>
            </header>

            <!-- Premium Content Wrapper -->
            <div id="premium-content-wrapper" class="p-6 sm:p-8 lg:p-10">
                <div id="loading-message" class="loading-indicator">Loading content...</div>
                <div id="access-denied-message" class="message-box hidden">
                    <p class="mb-4">This is a premium article. Please log in or subscribe to view the full content.</p>
                    <button id="login-prompt-button" class="button-primary">Login</button>
                    <button id="subscribe-prompt-button" class="button-secondary">Subscribe Now</button>
                </div>
                <div id="released-soon-message" class="message-box released-soon-message hidden">
                    <p class="mb-4 font-bold">Coming Soon!</p>
                    <p>This premium article will be released on September 10, 2025. Check back then to read Aura's sweet escape!</p>
                </div>
                
                <div id="blog-post-content" class="premium-content">
                    <div class="mb-8">
                        <img
                            src="https://i.imgur.com/4dZvTIC.jpeg"
                            alt="AI Influencer Aura strawberry picking in a DÔEN top"
                            class="w-full h-auto rounded-lg shadow-md object-cover mb-4"
                            onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';"
                        >
                        <p class="text-center text-sm text-gray-400 mt-2">
                            Aura, radiant amidst the strawberry fields, embodying effortless charm.
                        </p>
                    </div>

                    <article class="prose max-w-none text-gray-700 leading-relaxed">
                        <p class="mb-4">
                            In a delightful departure from the city's glamour, <strong class="text-gray-900">Aura</strong>, our digital muse, recently embraced the simple joys of nature with a charming strawberry picking adventure. This idyllic outing showcases her ability to blend high fashion with authentic experiences, all while looking effortlessly chic in a beautiful top from <strong class="text-gray-900">DÔEN</strong>.
                        </p>

                        <h2 class="text-2xl sm:text-3xl font-semibold text-gray-800 mb-4 mt-6">
                            The Perfect Picking Outfit: DÔEN's 'Henri Top'
                        </h2>
                        <p class="mb-4">
                            For her day among the berries, Aura chose DÔEN's 'Henri top', a piece that perfectly encapsulates the brand's aesthetic of romantic, vintage-inspired femininity. This particular top, often crafted from organic cotton-voile, features delicate lace trims, ruffles, and pintucks, creating a breezy and ethereal silhouette. Its soft fabric and relaxed fit make it ideal for a comfortable yet stylish outdoor activity. You can find the 'Henri top' and similar beautiful blouses from DÔEN on <a href="https://www.net-a-porter.com/en-us/shop/product/doen/clothing/blouses/henri-lace-trimmed-ruffled-pintucked-striped-organic-cotton-voile-top/1647597357418013" target="_blank" class="text-blue-600 hover:underline">NET-A-PORTER's DÔEN collection</a>.
                        </p>
                        <p class="mb-4">
                            DÔEN, founded by sisters Margaret and Katherine Kleveland in 2016, is celebrated for its commitment to ethical production and female empowerment. The brand works with fair-trade manufacturers and artisans worldwide, creating pieces that evoke a nostalgic Californian cool with soft florals, breezy silhouettes, and a touch of vintage charm. Their collections are designed to make women feel good, both in how they look and the values behind what they wear.
                        </p>

                        <h2 class="text-2xl sm:text-3xl font-semibold text-gray-800 mb-4 mt-6">
                            The Sweetness of Strawberry Season
                        </h2>
                        <div class="mb-8">
                            <img
                                src="https://i.imgur.com/Gnf3Tds.jpeg"
                                alt="AI Influencer Aura holding freshly picked strawberries"
                                class="w-full h-auto rounded-lg shadow-md object-cover mb-4"
                                onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';"
                            >
                            <p class="text-center text-sm text-gray-400 mt-2">
                                Aura's basket brimming with the day's fresh, juicy harvest.
                            </p>
                        </div>
                        <p class="mb-4">
                            Strawberry picking is a quintessential summer activity, offering a chance to connect with nature and enjoy the freshest produce. Aura's joy is palpable as she navigates the rows of lush green plants, carefully selecting the ripest, reddest berries. The vibrant colors of the strawberries against her delicate top create a picturesque scene, capturing the essence of a perfect summer day.
                        </p>

                        <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-3 mt-6">
                            Strawberry Cultivation: A Closer Look
                        </h3>
                        <p class="mb-4">
                            Strawberries thrive in full sunlight, ideally needing at least 6-10 hours of direct sun daily. They prefer well-drained, slightly acidic soil with a pH between 5.5 and 6.8. Proper spacing (around 18 inches apart for most varieties) is crucial to allow runners to spread and prevent overcrowding, which can lead to disease. Consistent watering, about 1 to 1.5 inches per week, is vital, especially during fruit development. Many farms use straw mulch (hence the name "strawberry") to keep the soil moist, suppress weeds, and keep the berries clean. While they are perennial plants, their most abundant yields often come in their second year, and many varieties are "June-bearing," producing a large crop over a few weeks, though "day-neutral" varieties can fruit throughout the summer.
                        </p>

                        <h2 class="text-2xl sm:text-3xl font-semibold text-gray-800 mb-4 mt-6">
                            Find Your Own Sweet Spot: Best Strawberry Picking Locations
                        </h2>
                        <p class="mb-4">
                            Inspired by Aura's delightful outing? Strawberry picking farms can be found across various regions, offering a fun and rewarding experience for families and individuals alike. Many farms provide a pick-your-own option, allowing you to harvest your own fresh berries. Here are some examples of highly-rated strawberry picking locations:
                        </p>
                        <ul class="list-disc list-inside mb-4 ml-4 text-gray-700">
                            <li class="mb-2">
                                <a href="https://www.butlersorchard.com/" target="_blank" class="text-blue-600 hover:underline">Butler's Orchard (Germantown, MD)</a>: A popular farm offering pick-your-own strawberries and other produce.
                            </li>
                            <li class="mb-2">
                                <a href="https://www.terhuneorchards.com/" target="_blank" class="text-blue-600 hover:underline">Terhune Orchards (Princeton, NJ)</a>: A family-owned orchard with strawberry picking season starting in late May.
                            </li>
                            <li class="mb-2">
                                <a href="https://bonnieplants.com/blogs/how-to-grow/growing-strawberries" target="_blank" class="text-blue-600 hover:underline">Bonnie Plants - Growing Strawberries Guide</a>: While not a farm, this resource offers excellent tips on growing your own strawberries, helping you understand what makes a good picking location.
                            </li>
                            <li class="mb-2">
                                For a comprehensive list in your area, consider searching online for "pick your own strawberries near me" or "strawberry farms [your state/region]". Websites like <a href="http://www.pickyourown.org/" target="_blank" class="text-blue-600 hover:underline">PickYourOwn.org</a> can also be helpful resources.
                            </li>
                        </ul>

                        <h2 class="text-2xl sm:text-3xl font-semibold text-gray-800 mb-4 mt-6">
                            Aura: Embracing Life's Simple Luxuries
                        </h2>
                        <p class="mb-4">
                            Aura's strawberry picking day is a beautiful reminder that luxury isn't always about grand gestures; it's also about finding joy and beauty in everyday moments. Her DÔEN top, a blend of comfort and elegance, perfectly suited the pastoral setting, allowing her to fully immerse herself in the experience. This outing highlights her multifaceted appeal, inspiring us all to seek out authentic experiences and embrace a lifestyle that is both stylish and soulful.
                        </p>

                        <p class="text-lg font-medium text-gray-800 mt-8 text-center">
                            Follow The Style Nexus for more captivating insights into AI fashion and a life well-lived!
                        </p>
                    </article>
                </div>
            </div>

            <!-- Blog Post Footer -->
            <footer class="p-6 sm:p-8 border-t border-gray-200 text-center text-sm text-gray-500">
                &copy; 2025 The Style Nexus. All rights reserved.
            </footer>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

        // Firebase configuration (replace with your actual project details)
        const firebaseConfig = {
            apiKey: "AIzaSyBeNeSgWGmedceP7XBn9rtWULX7_VSbyKQ",
            authDomain: "styleaura-c733a.firebaseapp.com",
            projectId: "styleaura-c733a",
            storageBucket: "styleaura-c733a.firebasestorage.app",
            messagingSenderId: "203110694567",
            appId: "1:203110694567:web:8796c5222edf0fe1b9e582",
            measurementId: "G-KD994GTYGS"
        };
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id'; // Use provided app ID or default

        // Initialize Firebase variables
        let app;
        let auth;
        let db;

        // Get references to HTML elements
        const blogPostContent = document.getElementById('blog-post-content');
        const accessDeniedMessage = document.getElementById('access-denied-message');
        const loadingMessage = document.getElementById('loading-message');
        const releasedSoonMessage = document.getElementById('released-soon-message');
        const authButton = document.getElementById('auth-button');
        const loginPromptButton = document.getElementById('login-prompt-button');
        const subscribePromptButton = document.getElementById('subscribe-prompt-button');
        const userIdDisplay = document.getElementById('user-id-display');
        const subscribeButton = document.getElementById('subscribe-button');
        const manageSubscriptionButton = document.getElementById('manage-subscription-button');

        // IMPORTANT: Replace this with your actual Stripe product link
        const STRIPE_PRODUCT_LINK = "https://buy.stripe.com/6oU00jacq6PieXt2hP8bS00";
        // Assuming your main login page is index.html or a dedicated login.html
        const LOGIN_PAGE_URL = "index.html"; // Or "login.html" if you have one

        // Set the release date for the premium article
        const RELEASE_DATE = new Date('2025-09-10T00:00:00Z');

        // Function to check if the article is released
        const isReleased = () => new Date() >= RELEASE_DATE;

        // Function to update UI based on auth state and subscription status
        const updateUI = async (user) => {
            loadingMessage.classList.add('hidden'); // Hide loading message

            if (user) {
                console.log("User is signed in:", user.uid);
                authButton.textContent = 'Logout';
                userIdDisplay.textContent = `User ID: ${user.uid}`;

                // Check subscription status in Firestore
                const userDocRef = doc(db, `artifacts/${appId}/users/${user.uid}/subscriptions`, 'premium');
                console.log(`Checking subscription at Firestore path: artifacts/${appId}/users/${user.uid}/subscriptions/premium`);
                
                // Use onSnapshot for real-time updates to subscription status
                onSnapshot(userDocRef, (docSnap) => {
                    console.log("Firestore docSnap exists:", docSnap.exists());
                    if (docSnap.exists()) {
                        console.log("Firestore docSnap data:", docSnap.data());
                    }
                    
                    if (docSnap.exists() && docSnap.data().active) {
                        console.log("User is a premium member.");
                        if (isReleased()) {
                            blogPostContent.classList.remove('hidden');
                            accessDeniedMessage.classList.add('hidden');
                            releasedSoonMessage.classList.add('hidden');
                        } else {
                            releasedSoonMessage.classList.remove('hidden');
                            blogPostContent.classList.add('hidden');
                            accessDeniedMessage.classList.add('hidden');
                        }
                        subscribeButton.classList.add('hidden');
                        manageSubscriptionButton.classList.remove('hidden');
                    } else {
                        console.log("User is not a premium member or subscription is inactive.");
                        blogPostContent.classList.add('hidden');
                        accessDeniedMessage.classList.remove('hidden');
                        releasedSoonMessage.classList.add('hidden');
                        subscribeButton.classList.remove('hidden');
                        manageSubscriptionButton.classList.add('hidden');
                    }
                }, (error) => {
                    console.error("Error listening to subscription status:", error);
                    let errorMessage = "Error checking subscription status. Please ensure your Firebase Firestore Security Rules allow read access to 'artifacts/{appId}/users/{userId}/subscriptions/premium' for authenticated users.";
                    if (error.code === 'permission-denied') {
                        errorMessage = `Error: Missing or insufficient permissions. Please check your Firebase Firestore Security Rules. You need rules like:
                                        match /artifacts/{appId}/users/{userId}/subscriptions/{document=**} {
                                            allow read: if request.auth != null && request.auth.uid == userId;
                                        }`;
                    }
                    
                    blogPostContent.classList.add('hidden');
                    accessDeniedMessage.classList.remove('hidden');
                    releasedSoonMessage.classList.add('hidden');
                    accessDeniedMessage.innerHTML = `<p class="mb-4">${errorMessage}</p>
                                                     <button id="login-prompt-button" class="button-primary">Login</button>
                                                     <button id="subscribe-prompt-button" class="button-secondary">Subscribe Now</button>`;
                    document.getElementById('login-prompt-button').addEventListener('click', () => {
                        window.location.href = LOGIN_PAGE_URL;
                    });
                    document.getElementById('subscribe-prompt-button').addEventListener('click', () => {
                        window.location.href = STRIPE_PRODUCT_LINK;
                    });

                    subscribeButton.classList.remove('hidden');
                    manageSubscriptionButton.classList.add('hidden');
                    userIdDisplay.textContent = `User ID: ${user.uid} (Subscription check failed)`;
                });

            } else {
                console.log("User is signed out.");
                blogPostContent.classList.add('hidden');
                accessDeniedMessage.classList.remove('hidden');
                releasedSoonMessage.classList.add('hidden');
                authButton.textContent = 'Login';
                userIdDisplay.textContent = '';
                subscribeButton.classList.remove('hidden');
                manageSubscriptionButton.classList.add('hidden');
            }
        };

        const initFirebaseAndAuth = async () => {
            try {
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
                console.log("Firebase initialized successfully.");

                onAuthStateChanged(auth, async (user) => {
                    updateUI(user);
                });

                authButton.addEventListener('click', async () => {
                    if (auth.currentUser) {
                        try {
                            await signOut(auth);
                            console.log("User signed out.");
                        } catch (error) {
                            console.error("Error signing out:", error);
                        }
                    } else {
                        window.location.href = LOGIN_PAGE_URL;
                    }
                });

                loginPromptButton.addEventListener('click', () => {
                    window.location.href = LOGIN_PAGE_URL;
                });

                subscribeButton.addEventListener('click', () => {
                    window.location.href = STRIPE_PRODUCT_LINK;
                });

                subscribePromptButton.addEventListener('click', () => {
                    window.location.href = STRIPE_PRODUCT_LINK;
                });

                manageSubscriptionButton.addEventListener('click', () => {
                    alert('Redirecting to subscription management. (Requires backend integration for Stripe Customer Portal)');
                });

            } catch (error) {
                console.error("Error initializing Firebase or setting up auth listeners:", error);
                loadingMessage.textContent = 'Error loading content. Please try again later.';
                updateUI(null);
            }
        };

        initFirebaseAndAuth();
    </script>
</body>
</html>
